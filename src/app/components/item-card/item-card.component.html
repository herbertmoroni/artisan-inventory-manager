<div class="item-card" [class.sold-out]="item.quantity === 0">
  <div class="item-image">
    <img *ngIf="item.image" [src]="item.image" [alt]="item.name">
    <div *ngIf="!item.image" class="item-image-placeholder">
      üì∏
      <span class="placeholder-text">{{ item.name }}</span>
    </div>
    <div class="item-price-overlay">${{ item.price | number:'1.2-2' }}</div>
  </div>
  
  <div class="item-content">
    <div class="item-header">
      <div class="item-main-info">
        <div class="item-name">{{ item.name }}</div>
        <span class="item-category">{{ item.category }}</span>
        <span *ngIf="item.nextImport" class="next-import-badge">Next Import</span>
      </div>
      <div class="item-quantity-badge">Qty: {{ item.quantity }}</div>
    </div>
    
    <div class="item-description">{{ item.description }}</div>
    
    <div class="item-meta">
      <span class="item-sku">SKU: {{ item._id?.slice(-6) }}</span>
      <span [style.color]="stockColor" style="font-weight: 500;">{{ stockStatus }}</span>
    </div>
    
    <div class="item-actions">
      <button class="item-btn btn-sell" 
              [disabled]="item.quantity === 0"
              (click)="onSell()">
        {{ item.quantity === 0 ? '‚úÖ Sold Out' : 'üí∞ Sell' }}
      </button>
      <button class="item-btn btn-edit" (click)="onEdit()">‚úèÔ∏è Edit</button>
    </div>
  </div>
</div>

<!-- Confirmation Overlay -->
<div *ngIf="showConfirmation" class="confirmation-overlay" (click)="onCancelSell()">
  <div class="confirmation-modal" (click)="$event.stopPropagation()">
    <div class="confirmation-header">
      <h3>Confirm Sale</h3>
    </div>
    <div class="confirmation-body">
      <p>Sell <strong>{{ item.name }}</strong> for <strong>${{ item.price | number:'1.2-2' }}</strong>?</p>
      <p *ngIf="activeFair" class="fair-info">Sale will be added to: <strong>{{ activeFair.name }}</strong></p>
      <p *ngIf="!activeFair" class="no-fair-warning">‚ö†Ô∏è No active fair - sale won't be tracked</p>
      <p class="quantity-info">Remaining quantity will be: {{ item.quantity - 1 }}</p>
    </div>
    <div class="confirmation-actions">
      <button class="modal-btn btn-cancel" (click)="onCancelSell()">
        ‚ùå Cancel
      </button>
      <button class="modal-btn btn-confirm" (click)="onConfirmSell()">
        ‚úÖ Confirm Sale
      </button>
    </div>
  </div>
</div>