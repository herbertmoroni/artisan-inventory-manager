<div class="item-form-page">
  <!-- Page Header -->
  <div class="page-header">
    <button class="back-btn" (click)="onCancel()">
      ‚Üê Back
    </button>
    <h1 class="page-title">{{ pageTitle }}</h1>
    <div class="header-actions">
      <button *ngIf="isEditMode" 
              class="delete-btn" 
              [disabled]="isDeleting"
              (click)="onDelete()">
        {{ isDeleting ? 'Deleting...' : 'üóëÔ∏è Delete' }}
      </button>
      <button class="save-btn" 
              [disabled]="!itemForm.valid || isSaving"
              (click)="onSubmit()">
        {{ isSaving ? 'Saving...' : 'Save' }}
      </button>
    </div>
  </div>

  <!-- Form Content -->
  <div class="form-container">
    <form [formGroup]="itemForm" (ngSubmit)="onSubmit()">
      <!-- Photo Section -->
      <div class="photo-section">
        <div class="photo-area" (click)="triggerCamera()">
          <img *ngIf="photoPreview" 
               [src]="photoPreview" 
               class="photo-preview" 
               alt="Item photo">
          <div *ngIf="!photoPreview" class="photo-placeholder">
            <div class="camera-icon">üì∑</div>
            <span>Tap to add photo</span>
          </div>
        </div>
        <input type="file" 
               id="cameraInput" 
               accept="image/*" 
               capture="camera" 
               style="display: none;" 
               (change)="onPhotoSelect($event)">
      </div>
      
      <!-- Form Fields -->
      <div class="form-section">
        <div class="form-group">
          <label>Item Name *</label>
          <input type="text" 
                 class="form-control" 
                 formControlName="name"
                 placeholder="Silver flower earrings">
        </div>
        
        <div class="form-group">
          <label>Category *</label>
          <select class="form-control" 
                  formControlName="category">
            <option value="">Choose category...</option>
            <option *ngFor="let category of categories" [value]="category">
              {{ category | titlecase }}
            </option>
          </select>
        </div>
        
        <div class="form-group">
          <label>Description</label>
          <textarea class="form-control" 
                    rows="3" 
                    formControlName="description"
                    placeholder="Handmade with blue stones..."></textarea>
        </div>
        
        <div class="form-row">
          <div class="form-group half">
            <label>Color/Material</label>
            <input type="text" 
                   class="form-control" 
                   formControlName="color"
                   placeholder="Silver/blue">
          </div>
          
          <div class="form-group half">
            <label>Price ($) *</label>
            <input type="number" 
                   class="form-control" 
                   step="0.01" 
                   formControlName="price"
                   placeholder="25.00">
          </div>
        </div>
        
        <div class="form-group">
          <label>Quantity *</label>
          <input type="number" 
                 class="form-control" 
                 min="0" 
                 formControlName="quantity"
                 placeholder="2">
        </div>
        
        <div class="form-group">
          <div class="checkbox-group">
            <input type="checkbox" 
                   id="nextImport" 
                   formControlName="nextImport">
            <label for="nextImport">Add to next import list</label>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>

<!-- Delete Confirmation Modal -->
<div *ngIf="showDeleteConfirmation" class="confirmation-overlay" (click)="onCancelDelete()">
  <div class="confirmation-modal" (click)="$event.stopPropagation()">
    <div class="confirmation-header">
      <h3>Delete Item</h3>
    </div>
    <div class="confirmation-body">
      <p>Permanently delete <strong>{{ currentItem?.name }}</strong>?</p>
      <p class="quantity-info">Current quantity: {{ currentItem?.quantity }}</p>
      <p style="color: var(--danger); font-weight: 500;">‚ö†Ô∏è This action cannot be undone</p>
    </div>
    <div class="confirmation-actions">
      <button class="modal-btn btn-cancel" (click)="onCancelDelete()">
        ‚ùå Cancel
      </button>
      <button class="modal-btn btn-confirm" 
              style="background: var(--danger, #f44336);"
              (click)="onConfirmDelete()">
        üóëÔ∏è Delete Forever
      </button>
    </div>
  </div>
</div>